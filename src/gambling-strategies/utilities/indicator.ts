export class Indicator {

    public getAmountOfBidsAndAsksFromOrderbook(orderBook: any) {

        // console.log(Object.keys(orderBook.bids))

        let amountOfBids = 0
        for (let e of Object.keys(orderBook.bids)) {
            amountOfBids = amountOfBids + (Number(e) * orderBook.bids[e]) 
        }
        // console.log(amountOfBids)
        
        let amountOfAsks = 0
        for (let e of Object.keys(orderBook.asks)) {
            amountOfAsks = amountOfAsks + (Number(e) * orderBook.asks[e]) 
        }
        // console.log(amountOfAsks)

        return {
            bids: amountOfBids,
            asks: amountOfAsks
        }
    }

    public getBidsAndAsksDeltaInPercent(bidsAndAsks: any) {
        const deltaInPercent = (bidsAndAsks.bids * 100 / bidsAndAsks.asks) - 100

        return deltaInPercent
    }
}


const orderBook = {
    "lastUpdateId": 9780995752,
    "bids": {
        "2592.20000000": 0.00832,
        "2592.19000000": 0.0267,
        "2592.10000000": 1.58288,
        "2592.05000000": 1.95788,
        "2592.00000000": 0.10035,
        "2591.97000000": 0.75176,
        "2591.93000000": 1.63759,
        "2591.92000000": 3.97333,
        "2591.81000000": 2.2,
        "2591.70000000": 6.65001,
        "2591.69000000": 0.2,
        "2591.68000000": 2.92861,
        "2591.65000000": 3.4976,
        "2591.52000000": 4.56419,
        "2591.50000000": 1.46162,
        "2591.47000000": 1.35903,
        "2591.43000000": 0.9203,
        "2591.39000000": 3.2905,
        "2591.38000000": 2.89285,
        "2591.36000000": 0.4,
        "2591.35000000": 7.20845,
        "2591.33000000": 2.07063,
        "2591.29000000": 12.60323,
        "2591.27000000": 23.91499,
        "2591.19000000": 3.80892,
        "2591.18000000": 2.07452,
        "2591.15000000": 9.55792,
        "2591.13000000": 1.49104,
        "2591.11000000": 0.03767,
        "2591.10000000": 1.5,
        "2591.09000000": 4,
        "2591.08000000": 10.45616,
        "2591.07000000": 3.30291,
        "2591.06000000": 0.77161,
        "2591.04000000": 27.8,
        "2591.02000000": 5.8574,
        "2591.01000000": 3.3,
        "2591.00000000": 1.96952,
        "2590.99000000": 0.4516,
        "2590.94000000": 1.6441,
        "2590.92000000": 3.85724,
        "2590.91000000": 1.62564,
        "2590.88000000": 1.1,
        "2590.86000000": 0.11579,
        "2590.81000000": 0.19292,
        "2590.80000000": 23.3418,
        "2590.77000000": 1.08376,
        "2590.66000000": 1.26305,
        "2590.65000000": 16.60748,
        "2590.64000000": 0.47513,
        "2590.61000000": 3.2,
        "2590.56000000": 0.53,
        "2590.55000000": 13.58536,
        "2590.52000000": 2.1,
        "2590.51000000": 1.52592,
        "2590.44000000": 1.93268,
        "2590.42000000": 0.03088,
        "2590.41000000": 0.00688,
        "2590.39000000": 6.10583,
        "2590.37000000": 1.43898,
        "2590.35000000": 0.38104,
        "2590.34000000": 0.82129,
        "2590.24000000": 1.0103,
        "2590.23000000": 1.64763,
        "2590.21000000": 5.80736,
        "2590.19000000": 3,
        "2590.17000000": 0.05,
        "2590.11000000": 0.43329,
        "2590.10000000": 8.59728,
        "2590.08000000": 1.15827,
        "2590.07000000": 1.79002,
        "2590.01000000": 19.0561,
        "2590.00000000": 2.17501,
        "2589.92000000": 0.35933,
        "2589.91000000": 6.8,
        "2589.90000000": 4.77392,
        "2589.84000000": 7.64919,
        "2589.81000000": 0.42863,
        "2589.80000000": 6.10451,
        "2589.72000000": 0.03475,
        "2589.71000000": 0.77197,
        "2589.68000000": 4,
        "2589.62000000": 12.2,
        "2589.59000000": 6.96728,
        "2589.58000000": 0.95016,
        "2589.55000000": 3,
        "2589.54000000": 0.44634,
        "2589.52000000": 0.71581,
        "2589.50000000": 0.00393,
        "2589.48000000": 3,
        "2589.47000000": 4,
        "2589.40000000": 3.05963,
        "2589.39000000": 5.21165,
        "2589.37000000": 4.00043,
        "2589.36000000": 2.4,
        "2589.32000000": 0.72916,
        "2589.30000000": 4.15,
        "2589.25000000": 0.43447,
        "2589.24000000": 0.00393,
        "2589.23000000": 0.01506
    },
    "asks": {
        "2592.21000000": 9.64053,
        "2592.40000000": 1.50484,
        "2592.41000000": 4,
        "2592.62000000": 4.97632,
        "2592.71000000": 1.90156,
        "2592.72000000": 0.44889,
        "2592.73000000": 0.00772,
        "2592.76000000": 1.92862,
        "2592.78000000": 0.77161,
        "2592.84000000": 1.4011,
        "2592.88000000": 3,
        "2592.90000000": 0.77161,
        "2593.00000000": 0.125,
        "2593.04000000": 3.8577,
        "2593.08000000": 0.1929,
        "2593.14000000": 1.8849,
        "2593.18000000": 0.15,
        "2593.19000000": 5.31938,
        "2593.20000000": 7.65323,
        "2593.21000000": 1.5,
        "2593.23000000": 3,
        "2593.24000000": 13.36631,
        "2593.25000000": 4,
        "2593.27000000": 3.6,
        "2593.34000000": 2,
        "2593.39000000": 4.0121,
        "2593.40000000": 2.02564,
        "2593.41000000": 8.80793,
        "2593.43000000": 0.80535,
        "2593.44000000": 0.80533,
        "2593.45000000": 3.85754,
        "2593.47000000": 0.00446,
        "2593.50000000": 3.36392,
        "2593.51000000": 5.40663,
        "2593.53000000": 0.19,
        "2593.56000000": 1.93322,
        "2593.62000000": 0.2,
        "2593.66000000": 0.77164,
        "2593.69000000": 3.58462,
        "2593.72000000": 0.53,
        "2593.74000000": 1.66334,
        "2593.76000000": 1.1,
        "2593.78000000": 3.44634,
        "2593.81000000": 3.7698,
        "2593.86000000": 3.11326,
        "2593.87000000": 6.83666,
        "2593.89000000": 4.3,
        "2593.91000000": 0.03855,
        "2593.94000000": 0.80555,
        "2593.99000000": 4.57098,
        "2594.00000000": 1.95772,
        "2594.03000000": 0.40251,
        "2594.05000000": 0.45296,
        "2594.07000000": 0.28049,
        "2594.09000000": 1.45487,
        "2594.14000000": 0.12949,
        "2594.15000000": 0.19301,
        "2594.17000000": 0.12724,
        "2594.18000000": 1.36912,
        "2594.28000000": 0.38597,
        "2594.29000000": 1.30291,
        "2594.30000000": 0.28592,
        "2594.32000000": 8.09446,
        "2594.35000000": 3.37816,
        "2594.37000000": 0.57899,
        "2594.38000000": 1.30291,
        "2594.42000000": 0.05,
        "2594.43000000": 6.10552,
        "2594.44000000": 4.72734,
        "2594.49000000": 2.1663,
        "2594.54000000": 19.102,
        "2594.58000000": 0.76118,
        "2594.59000000": 3,
        "2594.60000000": 2.38663,
        "2594.63000000": 1.50066,
        "2594.64000000": 0.04046,
        "2594.68000000": 0.03278,
        "2594.70000000": 3.0542,
        "2594.71000000": 0.09943,
        "2594.73000000": 0.9172,
        "2594.74000000": 3.01939,
        "2594.81000000": 6.03877,
        "2594.85000000": 4.57787,
        "2594.90000000": 3.60395,
        "2594.93000000": 5.57805,
        "2594.94000000": 0.42727,
        "2594.97000000": 2.80257,
        "2595.00000000": 25.2018,
        "2595.01000000": 0.17358,
        "2595.06000000": 3.85723,
        "2595.09000000": 0.16207,
        "2595.12000000": 5.2,
        "2595.15000000": 0.80514,
        "2595.27000000": 1.9968,
        "2595.28000000": 6.07,
        "2595.29000000": 2.1647,
        "2595.30000000": 0.12949,
        "2595.38000000": 6.50845,
        "2595.48000000": 5.64066,
        "2595.49000000": 5.91269
    }
}

// const xy = new Indicator().getAmountOfBidsAndAsksFromOrderbook(orderBook)
// console.log(xy)